{% extends "base.html"%}
{% load currency_filter %}

{% block content %}
{% include "decoration.html" with title=title|default:"Turnover by Deliverable" icon="report.png" block="main" %}
<table class="table table-condensed table-bordered table-hover dataTable">
<thead>
<tr>
    <th>Project</th>
    <th>Deliverable</th>
    <th>Service</th>
    <th>Service Family</th>
    <th>Domain</th>
    <th>Turnover</th>
</tr>
</thead>
<tbody>
{% for deliverable in service.get_deliverables %}
    <tr>
        <td><a href="{% url 'project' deliverable.project.id %}">{{deliverable.project}}</a></td>
        <td><a href="{% url 'deliverable' deliverable.id %}">{{deliverable}}</a></td>
        <td><a href="{% url 'service_report' service.id %}">{{service}}</a></td>
        <td><a href="{% url 'servicefamily_report' service.service_family.id %}">{{service.service_family}}</a></td>
        <td><a href="{% url 'domain_report' service.service_family.domain.id %}">{{service.service_family.domain}}</a></td>
        <td style="text-align:right;">{{deliverable.get_turnover|currency}}</td>
    </tr>
{% endfor %}
</tbody>
<tfoot>
    <tr>
        <th colspan="5">Total</th>
        <th style="text-align:right;">{{total_turnover|currency}}</th>
    </tr>
</tfoot>
<table>

{% endblock %}